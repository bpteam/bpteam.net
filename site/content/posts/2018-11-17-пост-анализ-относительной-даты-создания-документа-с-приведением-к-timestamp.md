---
title: "Пост анализ относительной даты создания документа с приведением к timestamp"
date: "2018-11-17"
categories: [ПРОГРАММИРОВАНИЕ]
categories: [IT]
tags: [PHP, Data mining, Date, Анализ, IT, Велосипед]
---

При сборе документов для анализа из открытых источников с дополнительной пост 
обработкой иногда нужно получить дату создания документа, но бывает так, что временная
метка записана в человеко понятном формате в относительном виде и на не английском языке,
в не структурированном виде. А документ мы пнинимает на обработку не во время получения скачивания.

Примеры входящих данных:

- в понедельник, 14:33
- две минуты назад
- вчера, 18:23
- сегодня, 19:47
- 2018-11-17 18:22

## Предварительны план

Так как время призодит в разных языках и разных форматах, нам нужно привести несколько операций для понимания,
того, что перед нами и в итоге получить Unix Timestamp.

### Шаги

1) Преобразовать в английский язык
2) Очистить от шума 
    - не переведенные части
    - симводы не нужные для понимания временной метки
3) Применение существующих решений для анализа строки средствами php
    - strtotime
    - Intl
    - Carbon
4) Выбор наиболее оптимального результата

## Начальная информация

Пример входящей информации для анализа.

Язык: Русский

Входящие данные: в понедельник, 14:30

Дата анализа данных: 2018-11-21 12:00

Дата сбора данных: 2018-11-14 14:00

Результат должен быть двух видов, так как в строке есть не опрделенность. Пользователь должен сам
указать время должно считаться всегда в прошлом времени. Либо запоминать два значения в таких случаях
до выяснения информации, как именно формулируется дата для текущего документа.

Дата для будущего времени: 2018-11-19 14:30

Дата для прошлого времени: 2018-11-12 14:30

